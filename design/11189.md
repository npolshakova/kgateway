# EP-11189: Health Checks

* Issue: [#11189](https://github.com/kgateway-dev/kgateway/issues/11189)

## Background

Health Checks are used to periodically check the health of a service in your cluster. If a service is unavailable, 
the service is removed from the load balancing pool until health is re-established. 

Envoy supports several different types of health checking:
- HTTP
- gRPC
- L3/L4
- Redis
- Thrift 

Health checks occur over the transport socket specified for the cluster. This implies that if a cluster is using a TLS-enabled transport socket, the health check will also occur over TLS. The TLS options used for health check connections can be specified, which is useful if the corresponding upstream is using ALPN-based FilterChainMatch with different protocols for health checks versus data connections.


## Motivation

<!--
This section is for explicitly listing the motivation, goals, and non-goals of
this EP. Describe why the change is important and the benefits to users. The
motivation section can optionally provide links to [experience reports] to
demonstrate the interest in a EP within the wider Kubernetes community.

[experience reports]: https://github.com/golang/go/wiki/ExperienceReports
-->

### Goals

<!--

List the specific goals of the EP. What is it trying to achieve? How will we
know that this has succeeded?

Include specific, actionable outcomes. Ensure that the goals focus on the scope of
the proposed feature.
-->


### Non-Goals

<!--
What is out of scope for this EP? Listing non-goals helps to focus discussion
and make progress.
-->

## Implementation Details

<!--
This section should contain enough information that the specifics of your
change are understandable. This may include API specs (though not always
required) or even code snippets. If there's any ambiguity about HOW your
proposal will be implemented, this is the place to discuss them.


### Configuration
Specify changes to any configuration APIs, CRDs, or user-facing options to enable/disable
the feature. Include references to relevant files or configurations that need updates.

### Plugin
Describe how the feature will be added as a plugin (if applicable).
Include references to existing plugin frameworks or structures.
Highlight the plugin's responsibilities and integration points.

### Controllers
Outline the responsibilities of new or updated controllers.
Specify conditions for their operation and integration with existing resources.
Mention required RBAC updates or new permissions.

### Deployer
Detail deployment-specific updates, e.g., Helm chart modifications, custom deployer changes, etc.
Include any prerequisites or dependencies for deployment.

### Translator and Proxy Syncer
Specify updates to translators, syncers, or other intermediary components.
Highlight how these components interact with the feature's resources or backend.

### Reporting
Describe changes to status reporting or monitoring frameworks.
Include any caveats or limitations in initial reporting.
-->

### Test Plan

<!--
    Define the testing strategy for the feature.
    Include unit, integration, and end-to-end (e2e) tests.
    Specify any additional frameworks or tools required for testing.
-->

## Alternatives

<!--
Highlight potential challenges or trade-offs.
-->

## Open Questions

<!--
Include any unresolved questions or areas requiring feedback.
-->
