apiVersion: gateway.kgateway.dev/v1alpha1
kind: RoutePolicy
metadata:
  name: openai-azure-policy
  namespace: ai-test
spec:
    ai:
      promptGuard:
        request:
          moderation:
            openai:
              authToken:
                secretRef:
                  name: openai-secret
                  namespace: ai-test
          regex:
            builtins:
            - PHONE_NUMBER
            - EMAIL
            - SSN
            - CREDIT_CARD
        response:
          regex:
            builtins:
            - PHONE_NUMBER
            - EMAIL
            - SSN
            - CREDIT_CARD
---
apiVersion: gateway.kgateway.dev/v1alpha1
kind: RoutePolicy
metadata:
  name: openai-policy
  namespace: ai-test
spec:
    ai:
      promptGuard:
        request:
          customResponse:
            message: "{ \"message\": \"Please provide a valid input.\" }"
            statusCode: 400
          regex:
            action: REJECT
            builtins:
            - PHONE_NUMBER
            - EMAIL
            - SSN
            - CREDIT_CARD
        response:
          regex:
            builtins:
            - PHONE_NUMBER
            - EMAIL
            - SSN
            - CREDIT_CARD
---
apiVersion: gateway.kgateway.dev/v1alpha1
kind: RoutePolicy
metadata:
  name: gemini-policy
  namespace: ai-test
spec:
    ai:
      promptGuard:
        request:
          regex:
            action: REJECT
            builtins:
            - PHONE_NUMBER
            - EMAIL
            - SSN
            - CREDIT_CARD
        response:
          regex:
            builtins:
            - PHONE_NUMBER
            - EMAIL
            - SSN
            - CREDIT_CARD
---
apiVersion: gateway.kgateway.dev/v1alpha1
kind: RoutePolicy
metadata:
  name: vertex-ai-policy
  namespace: ai-test
spec:
  ai:
    promptGuard:
      request:
        regex:
          action: REJECT
          builtins:
          - PHONE_NUMBER
          - EMAIL
          - SSN
          - CREDIT_CARD
      response:
        regex:
          builtins:
          - PHONE_NUMBER
          - EMAIL
          - SSN
          - CREDIT_CARD